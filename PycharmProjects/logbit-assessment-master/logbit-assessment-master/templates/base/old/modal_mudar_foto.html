
<div class="modal_imagens" data-position="center">

    <section class="modal--content" data-id="modal_avatar">
        <header class="pt-24 pb-16 px-32">
            <h5 class="font18">Cambiar foto</h5>
    
            <div class="close--modal" data-xclose="modal_imagens">

				<svg id="icon_close" viewBox="0 0 25 24" fill="none" xmlns="http://www.w3.org/2000/svg">
					<path d="M8.55127 8L16.5513 16" stroke="var(--cor-1, #333747)" stroke-width="1.5" stroke-linecap="round"
						stroke-linejoin="round" />
					<path d="M16.5513 8L8.55127 16" stroke="var(--cor-1, #333747)" stroke-width="1.5" stroke-linecap="round"
						stroke-linejoin="round" />
				</svg>
                
            </div>
        </header>
    
        <div>

            <form class="p-0 form--foto" action="{% url 'url_alterar_foto' %}" enctype="multipart/form-data"
                method="POST">
                {% csrf_token %}
              
                <label class="label--avatar"> 
                    <p>Clic para seleccionar tu avatar.</p>
                    <input type="file" name="avatar" accept="image/*" id="id_avatar">
                    <img class="image--avatar" src="" alt="" class="d-none">
                </label>
    
                <footer class="btn--wrapper px-32 py-24  gap-8">
                    <button type="button" class="btn--2" data-xclose="modal_imagens">Cancelar</button>
                    <button type="button" class="btn--1" onclick="createUrl()">
                        Guardar ediciones</button>
                </footer>
            </form>

			
        </div>
    </section>
</div>

<script>
		function createUrl(){
			const form = document.querySelector(".form--foto")
			const input = document.createElement("input")
		
			input.setAttribute("type", "hidden")
			input.setAttribute("name", "url")
			input.value = window.location.href
			form.appendChild(input)

			form.submit()

			
		}

		const changeImageInputFile = (evt) => {
		const [file] = evt.target.files
		const form = evt.target.closest("form")

		if (file) {
			const img = form.querySelector(".image--avatar")
			const label = form.querySelector(".label--avatar")

			img.src = URL.createObjectURL(file)
			img.classList.remove('d-none')
			label.classList.add("have--img")
		}
	}


	document.querySelector("input#id_avatar")
		.addEventListener("change", changeImageInputFile)
</script>
{% load static %}
{% load traducao %}

<div class="card card-home flex flex-col md2:col-span-2 py-24 h-[25rem] xl:h-[20rem]">
    <h3 class="line-before line-blue relative text-lg text-neutral-80 pl-24">
        {% traduzir 'Melhorar meu score' request %}
    </h3>

    <div class="h-full mt-24 px-16 flex flex-col flex-1" x-data="{ openTab: 1 }">
        <div class="flex-1 flex flex-col items-center justify-center h-full" x-show="openTab === 1">
            {% if curso.progresso_quizz == 0 %}
                <div class="conteudo flex items-center justify-center h-full">
                    <p class="max-w-[220px] text-center text-neutral-80 font-medium">
                        {% traduzir 'Você ainda não finalizou nenhum Quiz. Comece nos episódios para seu score subir' request %}
                    </p>
                </div>
            {% elif curso.progresso_quizz < 33 %}
                <div class="flex-1 flex flex-col items-center justify-center px-24">
                    <div class="card card-trophy small !w-[8.375rem]">
                        <img src="{% static 'assessment/assets/dist/images/bronze_trophy.png' %}" />
                        <span>{% traduzir 'Bronze em' request %} {{curso.titulo}}</span>
                    </div>
        
                    <p class="mt-24 text-sm font-medium text-neutral-80 leading-[1.0625rem] text-center">
                        {% traduzir 'Você atingiu' request %} {{curso.progresso_quizz|floatformat}}% <b>{% traduzir 'em' request %} {{curso.titulo}}</b>
                    </p>
                </div>
            {% elif curso.progresso_quizz < 66 %}
                <div class="flex-1 flex flex-col items-center justify-center px-24">
                    <div class="card card-trophy small !w-[8.375rem]">
                        <img src="{% static 'assessment/assets/dist/images/silver_trophy.png' %}" />
                        <span>{% traduzir 'Prata em' request %} {{curso.titulo}}</span>
                    </div>
        
                    <p class="mt-24 text-sm font-medium text-neutral-80 leading-[1.0625rem] text-center">
                        {% traduzir 'Você atingiu' request %} {{curso.progresso_quizz|floatformat}}% <b>{% traduzir 'em' request %} {{curso.titulo}}</b>
                    </p>
                </div>
            {% else %}
                <div class="flex-1 flex flex-col items-center justify-center px-24">
                    <div class="card card-trophy small !w-[8.375rem]">
                        <img src="{% static 'assessment/assets/dist/images/gold_trophy.png' %}" />
                        <span>{% traduzir 'Ouro em' request %} {{curso.titulo}}</span>
                    </div>
        
                    <p class="mt-24 text-sm font-medium text-neutral-80 leading-[1.0625rem] text-center">
                        {% traduzir 'Você atingiu' request %} {{curso.progresso_quizz|floatformat}}% <b>{% traduzir 'em' request %} {{curso.titulo}}</b>
                    </p>
                </div>
            {% endif %}
        </div>

        <div class="conteudo relative flex flex-col gap-24 h-[16.125rem] overflow-y-auto styled-scroll xl:h-[11rem]" x-show="openTab === 2">
            {% for modulo in curso.modulo_set.all %}
                {% if modulo.get_perguntas %}
                    <article>
                        <h1>{{modulo.quantidade_perguntas}}</h1>
                        <p class="font-normal text-base leading-[1.1875rem] text-neutral-80 mb-16">{{modulo.titulo}}</p>
                        
                        <div class="grid gap-8 overflow-y-auto styled-scroll h-[8rem] grid-cols-3">
                            <div class="card card-trophy small resize opacity-50 {% if curso.progresso_quizz < 33 %}!opacity-100{% endif %}">
                                <img src="{% static 'assessment/assets/dist/images/bronze_trophy.png' %}" alt="Mestre" />
                                <span>{% traduzir 'Nível Bronze' request %}</span>
                            </div>
                            <div class="card card-trophy small resize opacity-50 {% if curso.progresso_quizz >= 33 and curso.progresso_quizz < 66 %}!opacity-100{% endif %}">
                                <img src="{% static 'assessment/assets/dist/images/silver_trophy.png' %}" alt="Mestre" />
                                <span>{% traduzir 'Nível Prata' request %}</span>
                            </div>
                            <div class="card card-trophy small resize opacity-50 {% if curso.progresso_quizz >= 66 %}!opacity-100{% endif %}">
                                <img src="{% static 'assessment/assets/dist/images/gold_trophy.png' %}" alt="Mestre" />
                                <span>{% traduzir 'Nível Ouro' request %}</span>
                            </div>
                        </div>
                    </article>
                {% endif %}
            {% endfor %}
        </div>

        <div class="footer-card mt-16 xl:mt-[1.1rem]">
            <span class="group" @click="openTab = 2" x-show="openTab === 1" style="font-size: .75rem;">
                {% traduzir 'Detalhes' request %}
                <svg class="transition-transform group-hover:translate-x-2">
                    <use xlink:href="#icon_arrow_right"></use>
                </svg>
            </span>
            
            <span class="group" @click="openTab = 1" x-show="openTab === 2" style="font-size: .75rem;">
                {% traduzir 'Resumir' request %}
                <svg class="transition-transform group-hover:translate-x-2">
                    <use xlink:href="#icon_arrow_right"></use>
                </svg>
            </span>
        </div>
    </div>
</div>